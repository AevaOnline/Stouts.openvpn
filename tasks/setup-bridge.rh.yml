---

- name: Setup up script
  when: openvpn_bridge == true
  template:
    src: up.sh.j2
    dest: /etc/openvpn/up.sh
    mode: o+x
  tags: bridge

- name: Setup down script
  template:
    src: down.sh.j2
    dest: /etc/openvpn/down.sh
    mode: o+x
  tags: bridge
  when: openvpn_bridge == true

- name: Setup bridge
  template:
    src: bridge-interface.rh.j2
    dest: "/etc/sysconfig/network-scripts/ifcfg-br-{{ openvpn_dev }}"
  when: openvpn_bridge == true
  notify: restart networking redhat
  tags: bridge

- name: Remove interface configuration for "{{ openvpn_dev }}"
  file:
    path: "/etc/sysconfig/network-scripts/ifcfg-br-{{ openvpn_dev }}"
    state: absent
  when: openvpn_bridge == false
  tags: bridge

